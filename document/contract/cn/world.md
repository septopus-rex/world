# Septopusåˆçº¦ - Worldæ¨¡å—

* Worldæ˜¯Septopusçš„ä¸»è¦äº¤æµåœºæ‰€ï¼Œæ— è®ºæ˜¯ç³»ç»Ÿè‡ªèº«çš„å„ç§åŠŸèƒ½ï¼Œè¿˜æ˜¯å¯¹å¤–å±•ç¤ºå†…å®¹æ¥å½°æ˜¾åŒºå—é“¾è™šæ‹Ÿä¸–ç•Œçš„é­…åŠ›ï¼Œéƒ½éœ€è¦è¿™ä¸ª3Dçš„è™šæ‹Ÿä¸–ç•Œã€‚
* Septopus Worldåˆçº¦ï¼Œèƒ½å®Œæ•´çš„æ”¯æŒä¸–ç•Œå±‚é¢çš„å„ç§é“¾ä¸Šæ“ä½œï¼Œä¸»è¦å®Œæˆä»¥ä¸‹çš„åŠŸèƒ½ã€‚
  
| åŠŸèƒ½åˆ†ç±» | åŠŸèƒ½æ¦‚è¦ | è¯¦ç»†è¯´æ˜ |
| --- | --- | --- |
| ä¸–ç•ŒçŠ¶æ€ | æ‰€æœ‰ä¸–çºªçš„çŠ¶æ€ã€å„ä¸ªå•ç‹¬ä¸–ç•Œçš„çŠ¶æ€ | [è¯¦æƒ…](#worldçŠ¶æ€) |
| ç«æ‹åŠŸèƒ½ | å‘è¡Œæ–°çš„ä¸–ç•Œæ—¶ï¼Œç«æ‹åŠŸèƒ½çš„å®ç° | [è¯¦æƒ…](#worldçš„ç«æ‹) |
| é…ç½®ç®¡ç† | ä¸–ç•Œæ‰€æœ‰è€…å¯¹ä¸–ç•Œçš„çŠ¶æ€è¿›è¡Œç®¡ç† | [è¯¦æƒ…](#worldçš„é…ç½®) |
| é™„å±ç‰©ç®¡ç† | å¯ä¾›æ‰€æœ‰ä¸–ç•Œä½¿ç”¨çš„é™„å±ç‰©çš„ç®¡ç† | [è¯¦æƒ…](#é™„å±ç‰©) |

## WorldçŠ¶æ€

### åˆå§‹åŒ–

* ä¸–ç•Œçš„é€šç”¨é…ç½®å¦‚ä¸‹ï¼Œæ‰€æœ‰ä¸–ç•Œå…±ç”¨çš„å‚æ•°ã€‚
  
    ```Javascript
        {
            name: "Septopus Worlds",        //Septopusçš„åç§°
            desc: "Septopus description.",  //Septopusä¸–ç•Œçš„æè¿°
            initiator:"SOLANA_ADDRESS",       //å¯åŠ¨ä¸–ç•Œçš„è´¦å·ï¼Œç”¨äºå¯åŠ¨0å·ä¸–ç•Œçš„æ‹å–
            //genesis:{
            //    block:2034343,
            //    signature:"SOLANA_TRANSACTION_SIGNATURE",
            //    founder:"SOLANA_ADDRESS",  
            //},
            world: {                        //Septopus setting
                block: [4096, 4096],            //æ¯ä¸ªä¸–ç•Œçš„å°ºå¯¸ 
                side: [16, 16],                 //å•ä¸ªblockçš„å°ºå¯¸é™åˆ¶
                max: 100,                       //æœ€å¤§ä¸–ç•Œå‘è¡Œæ•°é‡
                rate:70,                        //å‰ä¸€ä¸ªä¸–ç•Œé”€å”®æ¯”ä¾‹ä¹‹åï¼Œå¼€å¯ä¸‹ä¸€ä¸ªä¸–ç•Œ
            },
            auction:{                       //Worldæ‹å–çš„å‚æ•°
                type:"dutch",
                bidding:{
                    price:100000,           //æ‹å–å¼€å§‹çš„ä»·æ ¼
                    pool: 20000,            //ä»¥blockè®¡ç®—çš„1å‘¨æ—¶é—´
                    fee: 10,                //è¿›å…¥æ‹å–æ± çš„è´¹ç”¨ï¼Œéœ€è¦10SOL
                    payment:2000,           //ä»¥blockè®¡ç®—çš„1å¤©æ—¶é—´
                    round:3,                //å¤±è´¥å¤šå°‘è½®åè¿›å…¥lotteryæ–¹å¼
                },
                lottery:{
                    pool: 20000,            //ä»¥blockè®¡ç®—çš„1å‘¨æ—¶é—´
                    fee: 10,                //è¿›å…¥æ‹å–æ± çš„è´¹ç”¨ï¼Œéœ€è¦10SOL
                },
            },
            time: {      //time setting
                year: 12,        // months/year
                month: 30,       // days/month
                day: 24,         // hours/day
                hour: 60,        // minutes/hour
                minute: 60,      // seconds/minute
                second: 1000,    // microseconds/second
                speed: 20,       // rate =  septopus year / reality year
            },
            sky: {      //sky setting
                sun: 1,         //amount of sun
            },
            weather: {  //Septopus weathe setting
                category: ["cloud", "rain", "snow"],
                grading: 8,
                interval: 500,             //å¤©æ°”æ›´æ–°é€Ÿåº¦ï¼ŒæŒ‰blockçš„æ•°æ¥å¤„ç†
                detail: {
                    cloud: [
                        "sunny",              // â˜€ï¸ å®Œå…¨æ™´æœ—
                        "mostly sunny",       // ğŸŒ¤ å‡ ä¹æ™´æœ—ï¼Œå°‘é‡äº‘
                        "partly cloudy",      // â›…ï¸ å±€éƒ¨å¤šäº‘
                        "mostly cloudy",      // ğŸŒ¥ å¤§éƒ¨åˆ†æ—¶é—´å¤šäº‘
                        "cloudy",             // â˜ï¸ å®Œå…¨å¤šäº‘
                        "overcast",           // ğŸŒ«ï¸ é˜´æ²‰ï¼ˆåšäº‘å±‚ï¼‰
                        "dim daylight",       // ğŸŒ å…‰çº¿æš—æ·¡ï¼ˆæ¥è¿‘é˜´å¤©æˆ–é›¾å¤©ï¼‰
                        "dark sky"            // ğŸŒ‘ æ¼†é»‘å‹æŠ‘çš„å¤©ç©ºï¼ˆé‡äº‘/æš´é›¨å‰ï¼‰
                    ],
                    rain: [
                        "frog",              // ğŸ¸ é’è›™å‡ºæ²¡ / æè½»å¾®æ¹¿æ°”ï¼ˆè±¡å¾åˆšä¸‹é›¨ï¼‰
                        "drizzle",           // ğŸŒ¦ ç»†é›¨/æ¯›æ¯›é›¨
                        "light rain",        // ğŸŒ§ å°é›¨
                        "moderate rain",     // ğŸŒ§ ä¸­é›¨
                        "heavy rain",        // ğŸŒ§ğŸŒ§ å¤§é›¨
                        "downpour",          // ğŸŒ§ğŸŒ§ğŸŒ§ å€¾ç›†å¤§é›¨
                        "rainstorm",         // ğŸŒ© é›·é›¨æˆ–æš´é›¨
                        "torrential rain"    // ğŸŒŠ ç‰¹å¤§æš´é›¨ï¼Œè¿‘ç¾å®³çº§
                    ],
                    snow: [
                        "frost",            // â„ï¸ éœœï¼Œæè½»å¾®ç»“å†°æˆ–å†»éœ²ï¼ŒéçœŸæ­£é™é›ª
                        "flurries",         // ğŸŒ¨ï¸ é›¶æ˜Ÿå°é›ª
                        "light snow",       // ğŸŒ¨ å°é›ª
                        "moderate snow",    // ğŸŒ¨ ä¸­é›ª
                        "heavy snow",       // ğŸŒ¨ğŸŒ¨ å¤§é›ª
                        "blowing snow",     // ğŸŒ¬ï¸â„ï¸ å¹é›ªï¼Œé£å¤§é›ªå¤§
                        "snowstorm",        // ğŸŒ¨âš¡ï¸ æš´é›ª
                        "whiteout"          // ğŸŒ«ï¸ å®Œå…¨ç™½èŒ«èŒ«ï¼Œèƒ½è§åº¦æä½
                    ],
                },
            },
        }
    ```

* åˆçº¦é‡Œçš„å®ç°
  
    ```Rust
        //åˆå§‹åŒ–æ•´ä¸ªSeptopus Worldçš„æ–¹æ³•
        pub fn world_init(
            ctx: Context<>,
            initiator:Account,      //åˆå§‹åŒ–0å·ä¸–ç•Œçš„è´¦å·
            recipient:Account,      //æ¥å—ä¸–ç•Œæ‹å–è´¹ç”¨çš„è´¦å·
        ) -> Result<()> {
            //0. æ•°æ®æ£€æµ‹
            //0.1. æ˜¯å¦ä¸ºåˆçº¦é‡Œçš„kingè´¦å·
            //0.2. æ˜¯å¦å·²ç»å­˜åœ¨PDA["SEPTOPU_WORLD"]è´¦å·ï¼Œå¦‚æœ‰çš„è¯ï¼Œå·²ç»åˆå§‹åŒ–è¿‡äº†

            //1. å»ºç«‹PDA["SEPTOPU_WORLD"]è´¦å·ï¼Œç”¨äºä¿å­˜ä»¥ä¸Šçš„é€šç”¨é…ç½®
            //1.0. æ•°æ®ç»“æ„ï¼šJSON string
            //1.1. å°†initiatorè®¾ç½®ä¸ºæ–¹æ³•ä¼ å…¥çš„è´¦å·ã€‚

            //2. å»ºç«‹PDA["SEPTOPU_WORLD_LIST"]è´¦å·ï¼Œ 
            //2.0. æ•°æ®ç»“æ„ï¼š[{owner:"SOLANA_ADDRESS",block:"",signature:"",auction:[2000000,2340000]},...]
            //2.1. ç”¨äºè®°å½•worldçš„ownerç­‰åŸºç¡€ä¿¡æ¯

            //3. å»ºç«‹PDA["SEPTOPU_WORLD_INDEX"]è´¦å·
            //1.0. æ•°æ®ç»“æ„ï¼šu32
            //1.1. å½“å‰æœªå¯åŠ¨çš„worldçš„index

            //4.
        }
    ```

### å¯åŠ¨æ–°ä¸–ç•Œ

* å•ä¸ªä¸–ç•Œçš„é…ç½®å¦‚ä¸‹ï¼š
  
    ```Javascript
        {
            name:"",
            descrption:"",
            homepage:"",
            accuracy:1000,
            block:{
                height:30,          //åœ°å—æ”¯æŒçš„é™„å±ç‰©æœ€å¤§é«˜åº¦
                fee:1,              //0ï½100,blockçš„äº¤æ˜“è´¹ç‡
                elevation: 0,       //åœ°å—çš„åˆå§‹æµ·æ‹”é«˜åº¦
                texture:2,
            },
            sky:{
                color:[],           //å¤©ç©ºçš„æ¸å˜é¢œè‰²è®¾ç½®
                moon:[              //å¤©ç©ºä¸­æœˆäº®æ•°é‡çš„é™åˆ¶
                    {},
                ]
            },
            player:{
                location:{

                },
                body:{

                },
                avatar:{
                    size: 2*1024*1024,      //3Däººå¶å°ºå¯¸
                },
                bag:{
                    max:200,                //æœ€å¤§å¯æºå¸¦ç‰©å“æ•°é‡
                }
            },
            adjunct:{
                amount: 60,         //adjunctçš„æ•°é‡ä¸Šé™
                list:[],            //æ”¯æŒçš„adjunctçš„åˆ—è¡¨
            },
            //owner:"SOLANA_ADDRESS",
            //genesis:{
            //    block:2034343,
            //    signature:"",
            //    index:0,
            //},
        }
    ```

* åˆçº¦å®ç°ï¼Œæ¯ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°è¿‡ç¨‹ã€‚

    ```Rust
        //å¯åŠ¨æ–°çš„ä¸–ç•Œçš„æ–¹æ³•
        pub fn world_start(
            ctx: Context<>, 
            index:u32,
            block:u64,
        ) -> Result<()> {  
            //0. æ•°æ®æ£€æµ‹
            //0.1. æ˜¯å¦å·²ç»å­˜åœ¨PDA["SEPTOPU_WORLD"]è´¦å·
            //0.2. å¦‚æœindex === 0ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ¥è‡ªé…ç½®é‡Œçš„initiatorè´¦å·çš„è¯·æ±‚
            //0.3. è·å–PDA["SEPTOPU_WORLD_INDEX"]çš„å€¼ï¼Œæ˜¯å¦å’Œä¼ å…¥çš„indexä¸€è‡´


            //1. ä¿®æ”¹PDA["SEPTOPU_WORLD_LIST"]
            //1.1. å¢åŠ  {owner:"SOLANA_ADDRESS",block:"",signature:"",auction:[${block},2340000]}, è®¾ç½®å¥½æ‹å–å¯åŠ¨çš„æ—¶é—´
            //1.2.

            //2. å»ºç«‹PDA["SEPTOPU_WORLD",index]è´¦å·ï¼Œç”¨äºä¿å­˜è¯¥ä¸–ç•Œçš„é…ç½®ä¿¡æ¯
            //2.0. æ•°æ®ç»“æ„ï¼šJSON string

            //3. ä¿®æ”¹["SEPTOPU_WORLD_INDEX"]ï¼Œæ‰§è¡Œå…¶incæ–¹æ³•ï¼Œ+1

            //4. å»ºç«‹PDA["WORLD_AUCTION",index]è´¦å·ï¼Œç”¨äºè®°å½•ä¸–ç•Œæ‹å–çš„è¿‡ç¨‹
            //4.0. æ•°æ®ç»“æ„ï¼š{type:"",log:[]}

        }
    ```

## Worldçš„ç«æ‹

* é™¤ç¬¬0å·ä¸–ç•Œå¤–ï¼Œå…¶ä»–çš„ä¸–ç•Œé”€å”®å¯åŠ¨çš„æ¡ä»¶æ˜¯ï¼Œä¸Šä¸€ä¸ªä¸–ç•Œçš„é”€å”®è¶…è¿‡é…ç½®é‡Œçš„ç™¾åˆ†æ¯”ï¼Œå³70%ã€‚
* ä¸–ç•Œçš„æ‰€æœ‰æƒé‡‡ç”¨ä»¥ä¸‹æ–¹å¼è·å–
  1. ä½¿ç”¨è·å…°æ‹å–ï¼Œå•ä¸ªä¸–ç•Œçš„å°ºå¯¸ä¸º4096*4096åœ°å—ï¼Œåœ°å—åˆå§‹åŒ–å®šä»·ä¸º0.1SOLï¼Œ100%é”€å”®æ”¶å…¥ä¸º160ä¸‡SOLå·¦å³ï¼Œæ‰€æœ‰è€…å’ŒSeptopusçš„é”€å”®åˆ†æˆæ¯”ä¾‹ä¸º5:5ã€‚æ‹å–ä»·æ ¼ä»10000SOLå¼€å§‹ã€‚
  2. æ‹å–çš„ç¬¬ä¸€é˜¶æ®µï¼Œä¸ºè¿›å…¥æ‹å–æ± é˜¶æ®µã€‚æ—¶é—´ä¸º1å‘¨ï¼Œç”¨æˆ·é”å®š10SOLå³å¯è¿›å…¥ï¼Œæ‹å–ç»“æŸåé€€è¿˜ã€‚
  3. æ‹å–çš„ç¬¬äºŒé˜¶æ®µï¼Œä¸ºå®é™…æ‹å–è¿‡ç¨‹ã€‚æŒ‰ç…§ç¬¬ä¸€é˜¶æ®µçš„è®¾å®šï¼Œæ‹å–ä»ç¬¬nå—å¼€å§‹ï¼Œéšç€å—é«˜åº¦å‡é«˜ï¼Œä»·æ ¼çº¿æ€§ä¸‹é™ï¼Œä»¥æœ€å…ˆä¹°ä¸‹çš„äº¤æ˜“çš„åŒºå—é«˜åº¦ï¼Œæ¥ç¡®å®šä»·æ ¼ã€‚
  4. æ‹å–çš„ç¬¬ä¸‰é˜¶æ®µï¼Œä¸ºæ”¯ä»˜å’Œé€€æ¬¾ç¼“è§£ã€‚æ‹å–æ± é‡Œçš„ç”¨æˆ·ï¼Œå¯ä»¥ç”³è¯·é€€æ¬¾ã€‚æ‹ä¸­çš„ç”¨æˆ·ï¼Œå¼€å§‹æ”¯ä»˜å‰©ä½™è´¹ç”¨ï¼Œæ”¯ä»˜æœ‰æ•ˆæœŸä¸º1å¤©ã€‚
  5. æ‹å–çš„é‡å¯ï¼Œå¦‚ç”¨æˆ·æœªèƒ½æ”¯ä»˜è´¹ç”¨ï¼Œåˆ™é‡æ–°å¼€å§‹æ‹å–ã€‚
  6. å½“è¿ç»­3æ¬¡æ‹å–å¤±è´¥åï¼Œè¿›å…¥éšæœºé€‰å–è¿‡ç¨‹ã€‚
  7. éšæœºé€‰å–çš„ç¬¬ä¸€é˜¶æ®µï¼Œä¸ºè¿›å…¥é€‰å–é˜¶æ®µã€‚æ—¶é—´ä¸º1å‘¨ï¼Œç”¨æˆ·é”å®š0.5SOLå³å¯è¿›å…¥ï¼Œä¸è¿”è¿˜ã€‚
  8. éšæœºé€‰å–çš„ç¬¬äºŒé˜¶æ®µï¼Œé€‰å–é˜¶æ®µã€‚ç³»ç»Ÿä½¿ç”¨å®‰å…¨éšæœºæ•°ï¼Œåœ¨é€‰å–æ± é‡Œé€‰å–ä¸€ä½ä½œä¸ºä¸–çºªæ‰€æœ‰è€…ã€‚

### ç«æ‹è¿‡ç¨‹

```Rust
    //åŠ å…¥åˆ°æ‹å–æ± çš„æ“ä½œ
    pub fn world_auction_pool(
        ctx: Context<>,
        index:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //æ‹å–çš„æ“ä½œæ–¹æ³•ï¼Œå¯ä»¥è¿›è¡Œæ‹å–
    pub fn world_auction_bid(
        ctx: Context<>, 
        index: u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //ä¸–ç•Œè´­ä¹°è€…è®¤è¯å¹¶ä»˜è´¹
    pub fn world_auction_approve(
        ctx: Context<>, 
        index: u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

### ä¹é€æ¨¡å¼

```Rust
    //åŠ å…¥ä¸–ç•Œæ‰€æœ‰è€…çš„lottory pool
    pub fn world_lottery_pool(
        ctx: Context<>, 
        index:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //ç¡®è®¤lotteryä¸–ç•Œçš„æ‰€æœ‰è€…
    pub fn world_lottery_approve(
        ctx: Context<>, 
        index:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.

        //éœ€è¦æ”¯ä»˜ç»´æŒworldé…ç½®çš„ç§Ÿé‡‘
    }
```

### å¤±è´¥ç¡®è®¤

```Rust
    //ç¡®è®¤æ‹å–å¤±è´¥çš„æƒ…å†µï¼Œä»»ä½•äººéƒ½å¯ä»¥æ‰§è¡Œ
    pub fn world_restart(
        ctx: Context<>, 
        index: u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

## Worldçš„é…ç½®

### å‚æ•°è®¾ç½®

```Rust
    //æ›´æ–°ä¸–ç•Œçš„é…ç½®çš„æ“ä½œ
    pub fn world_setting_update(
        ctx: Context<>, 
        world:u32,              //ä¸–ç•Œç¼–å·
        key:String,
        value:String,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

### é™„å±ç‰©

```Rust
    //ç»™ä¸–ç•Œå¢åŠ adjunctçš„æ“ä½œ
    pub fn world_adjucnt_add(
        ctx: Context<>, 
        world: u32,
        adjunct: u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //ç»™ä¸–ç•Œç§»é™¤adjunctçš„æ“ä½œ
    pub fn world_adjucnt_remove(
        ctx: Context<>, 
        world: u32,
        adjucnt: u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //æ”¯ä»˜adjunctçš„è´¹ç”¨çš„æ“ä½œ
    pub fn world_adjucnt_fee(
        ctx: Context<>, 
        world:u32,
        adjunct: u32
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

## Worldçš„è½¬è®©

* åœ¨é”€å”®è½¬å…¥ä¸‹ä¸€ä¸ªä¸–ç•Œåï¼ŒWorldçš„æ‰€æœ‰æƒå¯ä»¥è¿›è¡Œè½¬è®©ã€‚ç°åœ¨çš„æ‰€æœ‰è€…ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªä»·æ ¼ä¾›äº¤æ˜“ã€‚

```Rust
    //è½¬è®©ä¸–ç•Œæ‰€æœ‰æƒ,è®¾ç½®å”®å–ä»·æ ¼
    pub fn world_sell(
        ctx: Context<>, 
        world:u32,
        price:u64,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //è´­ä¹°ä¸–ç•Œæ‰€æœ‰æƒ
    pub fn world_buy(
        ctx: Context<>, 
        world:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //æ’¤é”€ä¸–ç•Œæ‰€æœ‰æƒå”®å–çŠ¶æ€
    pub fn world_revoke(
        ctx: Context<>, 
        world:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

## é™„å±ç‰©ç®¡ç†

### é™„å±ç‰©å‘å¸ƒ

```Rust
    //å‘å¸ƒä¸€ä¸ªadjunctçš„è¿‡ç¨‹
    pub fn adjucnt_publish(
        ctx: Context<>, 
        name: String,            //adjunctçš„åç§°
        code: String,            //adjunctå­—ç¬¦ä¸²åŒ–çš„ä»£ç ï¼ŒåˆæœŸåªæ”¯æŒéƒ¨ç½²åœ¨Solanaä¸Š
        version: u32,            //ç‰ˆæœ¬å·
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //åˆ é™¤adjunctï¼Œå³å°†å…¶è®¾ç½®ä¸ºä¸å¯ç”¨
    pub fn adjucnt_remove(
        ctx: Context<>, 
        adjunct:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

### é™„å±ç‰©æ›´æ–°

```Rust
    pub fn adjucnt_update(
        ctx: Context<>, 
        adjunct:u32,
        code:String,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

## BlockåŠŸèƒ½

* Blockçš„é”€å”®çŠ¶æ€ï¼Œç”¨ä¸¤ç§æ–¹å¼æ¥ç»´æŒçŠ¶æ€ã€‚
  1. ç”¨counteræ¥è®°å½•æ€»é”€å”®æ•°é‡ã€‚å¯ä»¥ç”¨äºåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œä¾‹å¦‚å‘è¡Œæ–°çš„ä¸–ç•Œã€‚
  2. ç”¨Bitä½æ¥æ ‡è¯†æŒ‡å®šblockæ˜¯å¦å·²ç»é”€å”®ï¼Œä¾‹å¦‚[x,y],å³å»æŸ¥è¯¢PDA[x]ï¼Œè¯¥è´¦å·é•¿åº¦ä¸º512å­—èŠ‚(8*512=4096)æ¥å­˜å‚¨çŠ¶æ€ã€‚è¯¥æ–¹æ³•ä¹Ÿå¯ä»¥æ»¡è¶³éå†è¦æ±‚ï¼Œçœ‹çœ‹å“ªäº›blockè¿˜å¯ä»¥è´­ä¹°ã€‚
* Blockçš„æ•°æ®ï¼Œå­˜å‚¨åœ¨PDA[world,x,y]çš„ç‹¬ç«‹è´¦å·é‡Œï¼Œç”±è´­ä¹°è€…æ”¯ä»˜ç§Ÿé‡‘ã€‚

### Blockä¹°å–

```Rust
    //ä»¥åˆå§‹åŒ–çš„ä»·æ ¼è´­ä¹°blockçš„è¿‡ç¨‹ï¼Œå¯ä»¥æ‰¹é‡è´­ä¹°
    pub fn block_init(
        ctx: Context<>, 
        world:u32,
        x:u32,              //å¼€å§‹çš„xåæ ‡
        y:u32,              //å¼€å§‹çš„yåæ ‡
        ex:u32,             //xæ–¹å‘æ•°é‡ï¼Œé»˜è®¤ä¸º0
        ey:u32              //yæ–¹å‘æ•°é‡ï¼Œé»˜è®¤ä¸º0
    ) -> Result<()> {  
        //1.
        //2.
        //3.

        //éœ€è¦æ”¯ä»˜ç§Ÿé‡‘ï¼Œæ¥ç»´æŒæ•°æ®ï¼Œé™ä½ç³»ç»Ÿçš„å¼€é”€
    }
```

```Rust
    pub fn block_sell(
        ctx: Context<>, 
        world:u32,
        x:u32,
        y:u32,
        price:u64,
        target:Account,         //å¯é€‰ï¼Œå¯ä»¥å–ç»™æŒ‡å®šè´¦å·çš„äºº
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //æ’¤é”€å”®å–çŠ¶æ€
    pub fn block_revoke(
        ctx: Context<>, 
        world:u32,
        x:u32,
        y:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //è´­ä¹°æ­£åœ¨é”€å”®çš„block
    pub fn block_buy(
        ctx: Context<>, 
        world:u32,
        x:u32,
        y:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

### Blockæ›´æ–°

```Rust
    //æ›´æ–°blockçš„å†…å®¹
    pub fn block_update(
        ctx: Context<>, 
        world:u32,
        x:u32,
        y:u32,
        content:String
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

### Blockç®¡ç†

```Rust
    //ä¸¾æŠ¥blockçš„å†…å®¹
    pub fn block_complain(
        ctx: Context<>, 
        world:u32,
        x:u32,
        y:u32,
        signature:String            //å¯¹åº”çš„blockå†…å®¹çš„signature
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //ç¦æ­¢blockçš„è®¿é—®
    pub fn block_deny(
        ctx: Context<>, 
        world:u32,
        x:u32,
        y:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```

```Rust
    //æ¢å¤blockçš„è®¿é—®
    pub fn block_recover(
        ctx: Context<>, 
        world:u32,
        x:u32,
        y:u32,
    ) -> Result<()> {  
        //1.
        //2.
        //3.
    }
```