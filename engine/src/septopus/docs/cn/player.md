# 玩家说明

## 运动方式

* 通过修改`玩家`的运动能力，来实现步行和跑步。同时`玩家`的`运动方式`也进行更新。
* `玩家`的`运动方式`如下，["stand","walking","running","climbing","squatting","lying"]

## 位置计算

* 通过设置`玩家`所在的`附属物`来计算站立高度。本地保存的数据格式如下，其中站立的高度为`玩家`脚所在的位置。使用Septopus坐标系来记录信息。

```Javascript
    //这个数据是玩家的基础定位信息。前端保存的也是这个数据。
    //不保存用户关联的区块链的数据，涉及到安全问题，那部分数据需要加密处理
    {
        block: [2025, 501],         //玩家所在的区块位置
        world: 0,                   //玩家所在的世界编号
        position: [8, 14, 0],       //在block内的坐标
        rotation: [0, 0, 0],        //玩家的旋转状态
        stop:{
            on:false,               //是否站立在了stop上
            adjunct:"",             //附属物的名称
            index:0,                //附属物的索引编号
        },
        extend: 2,                  //周边显示的地块扩展数量
        posture: 0,                 //运动状态, ["stand","walking","running","climbing","squatting","lying"]
    },
```

* `玩家`站立高度的计算方式为：区块海拔 + 阻拦器(stop)高度。运动中，会出现下面这些情况。

|  运动模式   | 检测  |
|  ----  | ----  |
| `地块`到`阻拦器(stop)` | ["跨上去","被阻挡"] |
| `阻拦器(stop)`到`阻拦器(stop)`  | ["跨上去","被阻挡","走下去","跌落"]  |
| `阻拦器(stop)`到`地块`  | ["走下去","跌落"] |

* `玩家`在运动时，会计算和`阻拦器(stop)`的关系。

## 虚拟形象

* 系统采用开放标准，来支持显示不同的形象，满足`虚拟形象`的数据文件，以IPFS的方式保存，即可被调用加载。
* `虚拟形象`的参数标准如下：

### 身体参数

* `玩家`的身体参数也在数据里使用scale的方式来设置，服从`世界`的配置，用来计算`玩家`的碰撞。

```Javascript
    {
        body:{

        },
        action:[

        ],
        emotion:[
            
        ],
        datasource:"",          //base64格式的模型文件
        foramt:"fbx",           //模型文件的格式
    }
```

### 动作及效果

* `虚拟形象`通过内置关联到`运动方式`的动画，来支持在前端进行显示。
* `虚拟形象`支持的动作列表:["站立","走","跑","蹲","趴","爬"]
* `虚拟形象`支持的表情列表:["正常","开心","愤怒","悲伤"],每个表情下分8个梯度。