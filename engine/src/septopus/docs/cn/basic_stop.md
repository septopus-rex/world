# 阻拦体说明

* `阻拦体`(stop)是基础的系统组件，用于空间的阻断。在系统中会进行单独的计算，是一种特殊的附属物，和`Trigger`类似，也是在世界环境里触发的。
* `附属物`可以通过设置属性来实现`阻拦体`的功能，使用`附属物`的尺寸来创建。
* `阻拦体`被看成是`附属物`的一种，因其在`编辑模式`下也会在3D场景里显示，行为特征和其他`附属物`一致。
* `附属物`的详情，请参考文档[附属物文档](./adjunct.md)

## 阻拦体原理

* 从`玩家`的脚底开始计算，当`阻拦体`高度在`玩家`跨越的能力范围时，就将`玩家`的站高设置到`阻拦体`的上部顶面。对于球形的阻拦体，按照站立在球面的方式进行计算。
* `阻拦体`可以在`玩家`的头部,阻挡向上的运动。
* 相邻`地块`的`阻拦体`也要能够阻拦`玩家`的运动。
* `阻拦体`的检测方法挂载位置为`VBW.stop.check()`，该检测方法不是`附属物`的行为，为方便组织代码，也放在这里。

## 阻拦体的异常情况

* `阻拦体`存在**穿透**的情况，发生的原理是，当`玩家`运动速度过快时，前一个位置和后一个位置的差值大于了`阻拦体`的尺寸，`玩家`就会像穿墙一样，直接穿透。为避免这样的情况发生，需要给`阻拦体`设置足够的厚度，推荐不小于0.2米。在游戏模式中，如果玩家的运动能力得到加强，需要进一步的加厚。

* `阻拦体`存在**囚禁**的情况，发生的原理是，当`玩家`所在`地块`发生了数据更新，其站立的位置被设置了一个`阻拦体`，玩家就会出现无法动弹的情况。这需要`玩家`进行操作，直接跳转到其他`地块`来解决这个问题。当`玩家`跳入一个地块时，系统会处理站立位置，不会发生**囚禁**的情况。

## 阻拦体类型

* 为了适应不同的地形，阻拦体提供了不同类型来进行处理。

|  阻拦体类型   | 主要用途  |
|  ----  | ----  |
|  盒子  | 方盒形状的阻拦体，用于阻挡和抬升玩家站立高度  |
|  球形  | 主要用来处理复杂地形，例如颠簸路面  |
